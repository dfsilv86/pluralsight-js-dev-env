<div class="row">
    <div class="col-md-12">
        <widget title="{{::'stateCadastroCompraCasadaName'|translate|capitalize}}" has-box="true">
            <form class="form-horizontal row-border" novalidate="novalidate" name="itensCompraCasada">
                <div class="form-group actions">
                    <div class="col-md-12">
                        <button class="btn btn-primary" ng-disabled="salvarDesabilitado()" ng-click="save()" security-action="CompraCasada.Salvar"><i class="glyphicon glyphicon-save" /> &nbsp; {{::'save'|translate}}</button>
                        <button class="btn btn-danger"
                                mwl-confirm
                                title="{{::'confirmRemoveTitle'|translate }}"
                                message="{{::'confirmRemoveMessage'|translate }}"
                                on-confirm="remove()"
                                confirm-text="{{::'confirm'|translate|capitalize }}"
                                cancel-text="{{::'cancel'|translate|capitalize }}"
                                ng-disabled="filters.naoPossuiCadastro" security-action="CompraCasada.Excluir">
                            <i class=" glyphicon glyphicon-remove" /> &nbsp; {{::'exclude'|translate}}
                        </button>
                        <button class="btn btn-default"
                                mwl-confirm
                                title="{{::'confirmBackTitle'|translate }}"
                                message="{{::'confirmBackMessage'|translate }}"
                                on-confirm="back()"
                                is-disabled="!hasChanges()"
                                ng-click="backWithoutChanges()">
                            <i class="glyphicon glyphicon-arrow-left" /> &nbsp; {{::'back'|translate}}
                        </button>
                        <button class="btn btn-default"
                                mwl-confirm
                                title="{{::'confirmExportTitle'|translate }}"
                                message="{{::'confirmExportMessage'|translate }}"
                                on-confirm="toExport()"
                                is-disabled="!hasChanges()"
                                ng-click="toExportWithoutChanges()">
                            <i class="glyphicon glyphicon-save-file" /> &nbsp; {{::'export'|translate}}
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <form-field title="{{::'vendorNineDigitsCode'|translate|capitalize}}">
                        <lookup-vendor-nove-digitos name="vendor" ng-model="filters.cdV9D" sistema="filters.cdSistema" item-out="filters.vendor" description-width="large" ng-disabled="true"></lookup-vendor-nove-digitos>
                    </form-field>
                    <form-field title="{{::'stockControlItem'|translate|capitalize}}">
                        <lookup-item-saida name="sellItemSearch" ng-model="filters.cdItem" departamento="filters.cdDepartamento" sistema="filters.cdSistema" item-out="filters.item" ng-disabled="true"></lookup-item-saida>
                    </form-field>
                </div>
            </form>
        </widget>
        <widget has-box="no-padding">
            <div class="form-inline">
                <!-- TODO: componente de grid -->
                <table class="table simple table-striped table-checkable table-highlight-head table-no-inner-border table-hover table-condensed">
                    <thead>
                        <tr>
                            <th class="identifier" ng-click="orderBy('cdItem')">{{::'inputItemOnly'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="cdItem"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('dsItem')">{{::'description'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="dsItem"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('vlTipoReabastecimento')">{{::'replenishmentType'|translate|capitalize}} <sort-indicator ng-model="data.compraCasadaTodos" name="vlTipoReabastecimento"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('qtVendorPackage')">{{::'vendorPack'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="qtVendorPackage"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('vlCustoUnitario')">{{::'unitCost'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="vlCustoUnitario"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('traits')">{{::'traits'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="traits"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('paiCompraCasada')">{{::'parent'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="paiCompraCasada"></sort-indicator></th>
                            <th class="identifier" ng-click="orderBy('filhoCompraCasada')">{{::'child'|translate}} <sort-indicator ng-model="data.compraCasadaTodos" name="filhoCompraCasada"></sort-indicator></th>
                        </tr>
                    </thead>
                    <tbody ng-if="data.compraCasadaPaginado && data.compraCasadaPaginado.length > 0">
                        <tr ng-repeat="item in data.compraCasadaPaginado">
                            <td class="identifier" ng-style="{'cursor': item.traits > 0 && item.multisourcing.idMultisourcing == 0 ? 'default' : 'not-allowed'}">
                                <span class="observation" ng-if="item.traits == 0 || item.multisourcing.idMultisourcing != 0">*</span>
                                {{::item.cdItem}}
                            </td>
                            <td style="width:150px;padding-right: 0" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}"><div class="unbreakable" style="width:150px;" title="{{::item.dsItem}}">{{::item.dsItem}}</div></td>
                            <td class="number" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}">{{::item.vlTipoReabastecimento}}</td>
                            <td class="number" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}">{{::item.qtVendorPackage}}</td>
                            <td class="number" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}">{{::item.vlCustoUnitario}}</td>
                            <td class="number" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}"><a ng-attr-href="{{(item.traits > 0) ? '#' : undefined}}" ng-click="viewTraits(item)">{{::item.traits}}</a></td>
                            <td class="double domain symbol" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}">
                                <input type="checkbox" ng-model="item.paiCompraCasada" ng-checked="item.paiCompraCasada" ng-change="marcouUmPai(item)" ng-disabled="item.filhoCompraCasada || item.traits == 0 || item.multisourcing.idMultisourcing != 0" />
                            </td>
                            <td class="double domain symbol" ng-style="{'cursor': item.traits > 0 ? 'default' : 'not-allowed'}">
                                <input type="checkbox" ng-model="item.filhoCompraCasada" ng-checked="item.filhoCompraCasada" ng-change="marcouUmFilho(item)" ng-disabled="item.paiCompraCasada || item.traits == 0 || item.multisourcing.idMultisourcing != 0" />
                            </td>
                    </tbody>
                    <tbody ng-if="!data.compraCasadaPaginado || data.compraCasadaPaginado.length === 0">
                        <tr>
                            <td colspan="8" class="domain">{{::'noData'|translate|capitalize}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="row">
                    <div class="table-footer">
                        <div class="col-md-12">
                            <grid-pager ng-model="data.compraCasadaPaginado" page-method="applyPagingInMemory" settings="data.compraCasadaPaginado"></grid-pager>
                        </div>
                    </div>
                </div>
            </div>
        </widget>
        <span class="observation-legend">* {{::'itemWithoutTraitOrLinkedToMultiSourcing'|translate}}</span>
    </div>
</div>