<div class="row">
    <div class="col-md-12">
        <widget title="{{::'statePesquisaInventarioAgendamentoName'|translate|capitalize}}" has-box="true">
            <form class="form-horizontal row-border" novalidate="novalidate" name="filtroPesquisa">
                <div class="form-group actions">
                    <div class="col-md-12">
                        <button class="btn btn-default" ng-click="create()"><i class="glyphicon glyphicon-file" /> &nbsp; {{::'new'|translate}}</button>
                        <button class="btn btn-primary" ng-click="search(1)"><i class="glyphicon glyphicon-search" /> &nbsp; {{::'search'|translate}}</button>
                        <button class="btn btn-default" ng-click="clear()"><i class="glyphicon glyphicon-erase" /> &nbsp; {{::'clear'|translate}}</button>
                        <button class="btn btn-danger"
                                mwl-confirm
                                title="{{::'confirmRemoveTitle'|translate }}"
                                message="{{::'inventorySchedulingConfirmRemoveMessage'|translate }}"
                                on-confirm="remove()"
                                ng-disabled="data.values.count('marcado', true) == 0"
                                security-action="Inventario.RemoverAgendamentos">
                            <i class="glyphicon glyphicon-remove" /> &nbsp; {{::'remove'|translate}}
                        </button>
                        <button class="btn btn-default" ng-click="change()" ng-disabled="data.values.count('marcado', true) == 0"><i class="glyphicon glyphicon-pencil" /> &nbsp; {{::'change'|translate}} ({{data.values.count('marcado', true)}})</button>
                        <button class="btn btn-default" ng-click="exportIt()" ng-disabled="dtAgendamentoParaExportacao == null"><i class="glyphicon glyphicon-save-file" /> &nbsp; {{::'export'|translate}}</button>
                    </div>
                </div>
                <div class="form-group">
                    <form-field title="{{::'marketingStructure'|translate|capitalize}}" line-width="6" grid-width="8">
                        <dropdown-sistema ng-model="filters.cdSistema" required></dropdown-sistema>
                    </form-field>
                    <form-field title="{{::'chain'|translate|capitalize}}" line-width="6" grid-width="8">
                        <dropdown-bandeira ng-model="filters.idBandeira" sistema="filters.cdSistema" item-out="filters.bandeira" required></dropdown-bandeira>
                    </form-field>
                    <form-field title="{{::'store'|translate|capitalize}}" line-width="6" grid-width="12">
                        <lookup-loja ng-model="filters.cdLoja" bandeira="filters.idBandeira" sistema="filters.cdSistema" item-out="filters.loja" description-width="large"></lookup-loja>
                    </form-field>
                    <form-field title="{{::'department'|translate|capitalize}}" line-width="6" grid-width="12">
                        <lookup-departamento ng-model="filters.cdDepartamento" sistema="filters.cdSistema" item-out="filters.departamento" modo-pereciveis="restrito" description-width="large"></lookup-departamento>
                    </form-field>
                    <form-field title="{{::'notScheduled'|translate|capitalize}}" line-width="6" grid-width="12">
                        <checkbox ng-model="filters.naoAgendados"></checkbox>
                    </form-field>
                    <form-field title="{{::'date'|translate|capitalize}}" line-width="6" ng-if="!filters.naoAgendados">
                        <datepicker name="date" ng-model="filters.dtAgendamento"></datepicker>
                    </form-field>
                    <div ng-if="filters.naoAgendados">
                        <div class="col-md-1" style="height:33px;"></div>
                    </div>
                </div>
            </form>
        </widget>
        <widget has-box="no-padding">
            <div class="form-inline">
                <table class="table simple table-striped table-checkable table-highlight-head table-no-inner-border table-hover table-condensed">
                    <thead>
                        <tr>
                            <th class="action" ng-if="data.colunasAgendamentoVisiveis"><input type="checkbox" ng-model="data.marcado" ng-click="marcarTodos()" ng-checked="estaoTodosMarcados()" ng-disabled="data.values.length == 0" /></th>
                            <th>{{::'chain'|translate|capitalize}}</th>
                            <th>{{::'store'|translate|capitalize}}</th>
                            <th>{{::'department'|translate|capitalize}}</th>
                            <th class="date" ng-if="data.colunasAgendamentoVisiveis">{{::'date'|translate|capitalize}}</th>
                            <th class="domain" ng-if="data.colunasAgendamentoVisiveis">{{::'status'|translate|capitalize}}</th>
                        </tr>
                    </thead>
                    <tbody ng-if="data.values && data.values.length > 0">
                        <tr ng-repeat="item in data.values">
                            <td class="action" ng-if="data.colunasAgendamentoVisiveis">
                                <input type="checkbox" ng-model="item.marcado" ng-if="isFutureDate(item.dtAgendamento)" />
                            </td>
                            <td>{{item.bandeira|chainProfile}}</td>
                            <td>{{item.loja|storeProfile}}</td>
                            <td>{{item.departamento|departmentProfile}}</td>
                            <td class="date" ng-if="data.colunasAgendamentoVisiveis">{{item.dtAgendamento|amDateFormat:'DD/MM/YYYY'}}</td>
                            <td class="domain" ng-if="data.colunasAgendamentoVisiveis">{{isFutureDate(item.dtAgendamento) ? (item.stAgendamento|fixedValue:'inventarioAgendamentoStatus') : (item.inventario.stInventario|fixedValue:'inventarioStatus')}}</td>
                        </tr>
                    </tbody>
                    <tbody ng-if="!data.values || data.values.length === 0">
                        <tr>
                            <td colspan="{{data.colunasAgendamentoVisiveis ? 6 : 5}}" class="domain">{{::'noData'|translate|capitalize}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </widget>
    </div>
</div>
